!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Geosuggest=e()}}(function(){var e;return function t(e,n,o){function s(i,r){if(!n[i]){if(!e[i]){var a="function"==typeof require&&require;if(!r&&a)return a(i,!0);if(u)return u(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[i]={exports:{}};e[i][0].call(c.exports,function(t){var n=e[i][1][t];return s(n?n:t)},c,c.exports,t,e,n,o)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<o.length;i++)s(o[i]);return s}({1:[function(t,n){!function(){"use strict";function t(){for(var e=[],n=0;n<arguments.length;n++){var s=arguments[n];if(s){var u=typeof s;if("string"===u||"number"===u)e.push(s);else if(Array.isArray(s))e.push(t.apply(null,s));else if("object"===u)for(var i in s)o.call(s,i)&&s[i]&&e.push(i)}}return e.join(" ")}var o={}.hasOwnProperty;"undefined"!=typeof n&&n.exports?n.exports=t:"function"==typeof e&&"object"==typeof e.amd&&e.amd?e("classnames",[],function(){return t}):window.classNames=t}()},{}],2:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}Object.defineProperty(n,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function(e,t,n){for(var o=!0;o;){var s=e,u=t,i=n;o=!1,null===s&&(s=Function.prototype);var r=Object.getOwnPropertyDescriptor(s,u);if(void 0!==r){if("value"in r)return r.value;var a=r.get;return void 0===a?void 0:a.call(i)}var l=Object.getPrototypeOf(s);if(null===l)return void 0;e=l,t=u,n=i,o=!0,r=l=void 0}},c=window.React,p=o(c),f=e("classnames"),g=o(f),d=e("./defaults"),h=o(d),v=e("./filter-input-attributes"),y=o(v),b=e("./input"),m=o(b),S=e("./label"),w=o(S),O=e("./suggest-list"),_=o(O),I=function(e){function t(e){s(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={isMounted:!1,isSuggestsHidden:!0,userInput:this.props.initialValue,activeSuggest:null,suggests:[]}}return u(t,e),a(t,[{key:"componentWillReceiveProps",value:function(e){this.props.initialValue!==e.initialValue&&this.setState({userInput:e.initialValue})}},{key:"componentDidMount",value:function(){this.setState({userInput:this.props.initialValue});var e=this.props.googleMaps||window.google&&window.google.maps||this.googleMaps;e&&(this.googleMaps=e,this.autocompleteService=new e.places.AutocompleteService,this.geocoder=new e.Geocoder,this.setState({isMounted:!0}))}},{key:"componentWillUnmount",value:function(){this.setState({isMounted:!1})}},{key:"onInputChange",value:function(e){var t=this;this.setState({userInput:e},function(){t.showSuggests(),t.props.onChange(e)})}},{key:"onInputFocus",value:function(){this.props.onFocus(),this.showSuggests()}},{key:"onInputBlur",value:function(){this.state.ignoreBlur||this.hideSuggests()}},{key:"focus",value:function(){this.refs.input.focus()}},{key:"update",value:function(e){this.setState({userInput:e}),this.props.onChange(e)}},{key:"clear",value:function(){var e=this;this.setState({userInput:""},function(){return e.hideSuggests()})}},{key:"searchSuggests",value:function(){var e=this;if(!this.state.userInput)return void this.updateSuggests();var t={input:this.state.userInput};["location","radius","bounds","types"].forEach(function(n){e.props[n]&&(t[n]=e.props[n])}),this.props.country&&(t.componentRestrictions={country:this.props.country}),this.autocompleteService.getPlacePredictions(t,function(t){e.updateSuggests(t||[]),e.props.autoActivateFirstSuggest&&e.activateSuggest("next")})}},{key:"updateSuggests",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],n=[],o=new RegExp(i(this.state.userInput),"gim"),s=this.props.skipSuggest;this.props.fixtures.forEach(function(e){!s(e)&&e.label.match(o)&&(e.placeId=e.label,n.push(e))}),t.forEach(function(t){s(t)||n.push({label:e.props.getSuggestLabel(t),placeId:t.place_id})}),this.setState({suggests:n})}},{key:"showSuggests",value:function(){this.searchSuggests(),this.setState({isSuggestsHidden:!1})}},{key:"hideSuggests",value:function(){var e=this;this.props.onBlur(),setTimeout(function(){e.state&&e.state.isMounted&&e.setState({isSuggestsHidden:!0})},100)}},{key:"activateSuggest",value:function(e){if(this.state.isSuggestsHidden)return void this.showSuggests();var t=this.state.suggests.length-1,n="next"===e,o=null,s=0,u=0;for(u;t>=u;u++)this.state.suggests[u]===this.state.activeSuggest&&(s=n?u+1:u-1);this.state.activeSuggest||(s=n?0:t),s>=0&&t>=s&&(o=this.state.suggests[s]),this.setState({activeSuggest:o})}},{key:"selectSuggest",value:function(e){return e||(e={label:this.state.userInput}),this.setState({isSuggestsHidden:!0,userInput:e.label}),e.location?(this.setState({ignoreBlur:!1}),void this.props.onSuggestSelect(e)):void this.geocodeSuggest(e)}},{key:"geocodeSuggest",value:function(e){var t=this;this.geocoder.geocode(e.placeId?{placeId:e.placeId}:{address:e.label},function(n,o){if(o===t.googleMaps.GeocoderStatus.OK){var s=n[0],u=s.geometry.location;e.gmaps=s,e.location={lat:u.lat(),lng:u.lng()},t.props.onSuggestSelect(e)}})}},{key:"render",value:function(){var e=this,t=y["default"](this.props),n=g["default"]("geosuggest",this.props.className);return p["default"].createElement("div",{className:n},p["default"].createElement(m["default"],r({className:this.props.inputClassName,ref:"input",value:this.state.userInput,inputId:this.props.inputId,onChange:this.onInputChange.bind(this),onFocus:this.onInputFocus.bind(this),onBlur:this.onInputBlur.bind(this),onNext:function(){return e.activateSuggest("next")},onPrev:function(){return e.activateSuggest("prev")},onSelect:function(){return e.selectSuggest(e.state.activeSuggest)},onEscape:this.hideSuggests.bind(this)},t)),p["default"].createElement(w["default"],{inputId:this.props.inputId,labelValue:this.props.labelValue}),p["default"].createElement(_["default"],{isHidden:this.state.isSuggestsHidden,suggests:this.state.suggests,activeSuggest:this.state.activeSuggest,onSuggestMouseDown:function(){return e.setState({ignoreBlur:!0})},onSuggestMouseOut:function(){return e.setState({ignoreBlur:!1})},onSuggestSelect:this.selectSuggest.bind(this)}))}}]),t}(p["default"].Component);I.defaultProps=h["default"],n["default"]=I,t.exports=n["default"]},{"./defaults":3,"./filter-input-attributes":4,"./input":5,"./label":6,"./suggest-list":8,classnames:1}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]={fixtures:[],initialValue:"",placeholder:"Search places",disabled:!1,className:"",inputClassName:"",location:null,radius:null,bounds:null,country:null,types:null,googleMaps:null,onSuggestSelect:function(){},onFocus:function(){},onBlur:function(){},onChange:function(){},skipSuggest:function(){},getSuggestLabel:function(e){return e.description},autoActivateFirstSuggest:!1},t.exports=n["default"]},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=["autoComplete","autoFocus","disabled","form","formAction","formEncType","formMethod","formNoValidate","formTarget","height","id","inputMode","maxLength","name","pattern","placeholder","readOnly","required","size","spellCheck","tabIndex"];n["default"]=function(e){var t={};return o.forEach(function(n){e[n]&&(t[n]=e[n])}),t},t.exports=n["default"]},{}],5:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=function(e,t,n){for(var o=!0;o;){var s=e,u=t,i=n;o=!1,null===s&&(s=Function.prototype);var r=Object.getOwnPropertyDescriptor(s,u);if(void 0!==r){if("value"in r)return r.value;var a=r.get;return void 0===a?void 0:a.call(i)}var l=Object.getPrototypeOf(s);if(null===l)return void 0;e=l,t=u,n=i,o=!0,r=l=void 0}},l=window.React,c=o(l),p=e("classnames"),f=o(p),g=e("./filter-input-attributes"),d=o(g),h=function(e){function t(){s(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return u(t,e),r(t,[{key:"onChange",value:function(){this.props.onChange(this.refs.input.value)}},{key:"onInputKeyDown",value:function(e){switch(e.which){case 40:e.preventDefault(),this.props.onNext();break;case 38:e.preventDefault(),this.props.onPrev();break;case 13:e.preventDefault(),this.props.onSelect();break;case 9:this.props.onSelect();break;case 27:this.props.onEscape()}}},{key:"focus",value:function(){this.refs.input.focus()}},{key:"render",value:function(){var e=d["default"](this.props),t=f["default"]("geosuggest__input",this.props.className);return c["default"].createElement("input",i({className:t,ref:"input",type:"text",id:this.props.inputId},e,{value:this.props.value,onKeyDown:this.onInputKeyDown.bind(this),onChange:this.onChange.bind(this),onFocus:this.props.onFocus.bind(this),onBlur:this.props.onBlur.bind(this)}))}}]),t}(c["default"].Component);h.defaultProps={className:"",value:"",inputId:"",labelValue:"",onChange:function(){},onFocus:function(){},onBlur:function(){},onNext:function(){},onPrev:function(){},onSelect:function(){},onEscape:function(){}},n["default"]=h,t.exports=n["default"]},{"./filter-input-attributes":4,classnames:1}],6:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(e,t,n){for(var o=!0;o;){var s=e,u=t,i=n;o=!1,null===s&&(s=Function.prototype);var r=Object.getOwnPropertyDescriptor(s,u);if(void 0!==r){if("value"in r)return r.value;var a=r.get;return void 0===a?void 0:a.call(i)}var l=Object.getPrototypeOf(s);if(null===l)return void 0;e=l,t=u,n=i,o=!0,r=l=void 0}},a=window.React,l=o(a),c=e("classnames"),p=(o(c),e("./filter-input-attributes")),f=(o(p),function(e){function t(){s(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return u(t,e),i(t,[{key:"render",value:function(){return l["default"].createElement("label",{htmlFor:this.props.inputId},this.props.labelValue)}}]),t}(l["default"].Component));f.defaultProps={inputId:"",labelValue:""},n["default"]=f,t.exports=n["default"]},{"./filter-input-attributes":4,classnames:1}],7:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var s=window.React,u=o(s),i=e("classnames"),r=o(i);n["default"]=function(e){var t=e.isActive,n=void 0===t?!1:t,o=e.className,s=void 0===o?"":o,i=e.suggest,a=void 0===i?{}:i,l=e.onMouseDown,c=void 0===l?function(){}:l,p=e.onMouseOut,f=void 0===p?function(){}:p,g=e.onSelect,d=void 0===g?function(){}:g,h=r["default"]("geosuggest-item",s,{"geosuggest-item--active":n});return u["default"].createElement("li",{className:h,onMouseDown:c,onMouseOut:f,onClick:function(e){e.preventDefault(),d()}},a.label)},t.exports=n["default"]},{classnames:1}],8:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var s=window.React,u=o(s),i=e("classnames"),r=o(i),a=e("./suggest-item"),l=o(a);n["default"]=function(e){var t=e.isHidden,n=void 0===t?!0:t,o=e.suggests,s=void 0===o?[]:o,i=e.activeSuggest,a=e.onSuggestMouseDown,c=void 0===a?function(){}:a,p=e.onSuggestMouseOut,f=void 0===p?function(){}:p,g=e.onSuggestSelect,d=void 0===g?function(){}:g,h=r["default"]("geosuggest__suggests",{"geosuggest__suggests--hidden":n});return u["default"].createElement("ul",{className:h},s.map(function(e){var t=i&&e.placeId===i.placeId;return u["default"].createElement(l["default"],{key:e.placeId,suggest:e,isActive:t,onMouseDown:c,onMouseOut:f,onSelect:function(){return d(e)}})}))},t.exports=n["default"]},{"./suggest-item":7,classnames:1}]},{},[2])(2)});